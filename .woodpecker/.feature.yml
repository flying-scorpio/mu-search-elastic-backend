steps:
  submodules:
    image: alpine/git
    commands:
      - git submodule update --init --recursive
  push-feature-build:
    image: woodpeckerci/plugin-docker-buildx
    settings:
      repo: ${CI_REPO_OWNER##mu-}/${CI_REPO_NAME}
      tags: ${CI_COMMIT_BRANCH/\//-}
      platforms: linux/amd64
      dockerfile: scripts/visualize-scripts/Dockerfile
    secrets: [ docker_username, docker_password ]
when:
  # all events except pull_request
  - event: [push, pull_request_closed, tag, release, deployment, cron, manual]
    branch: "*/*"
